{% extends "lotto/base.html" %} 
{% load static %}

{% block content %}
<div class="container mt-5">
    <h2>ğŸ† ë‚´ ë¡œë˜ êµ¬ë§¤ ë‚´ì—­ ë° ë‹¹ì²¨ í™•ì¸</h2>
    <p class="lead">{{ request.user.username }}ë‹˜ì´ êµ¬ë§¤í•˜ì‹  ë¡œë˜ ë‚´ì—­ì…ë‹ˆë‹¤. (ì´ {{ results|length }} ê±´)</p>
    
    {% if not results %}
        <div class="alert alert-info">ì•„ì§ ë¡œë˜ êµ¬ë§¤ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤. <a href="{% url 'lotto_purchase' %}">ì§€ê¸ˆ êµ¬ë§¤</a>í•´ ë³´ì„¸ìš”!</div>
    {% endif %}

    <table class="table table-hover mt-4">
        <thead class="table-dark">
            <tr>
                <th>íšŒì°¨</th>
                <th>êµ¬ë§¤ ìœ í˜•</th>
                <th>êµ¬ë§¤ ë²ˆí˜¸</th>
                <th>ì¶”ì²¨ ë²ˆí˜¸ (ë³´ë„ˆìŠ¤)</th>
                <th>êµ¬ë§¤ ì¼ì‹œ</th>
                <th>ë‹¹ì²¨ ê²°ê³¼</th>
            </tr>
        </thead>
        <tbody>
            {% for result in results %}
            <tr>
                <td>{{ result.purchase.round.round|default:"N/A" }}</td>
                <td>
                    {% if result.purchase.lotto_type == 'A' %}
                        ìë™
                    {% else %}
                        ìˆ˜ë™
                    {% endif %}
                </td>
                <td>
                    {% for num in result.purchased_numbers %}
                        <span class="badge bg-primary text-white me-1">{{ num }}</span>
                    {% endfor %}
                </td>
                <td>
                    {% if result.winning_numbers %}
                        {% for num in result.winning_numbers %}
                            <span class="badge bg-danger me-1">{{ num }}</span>
                        {% endfor %}
                        <span class="badge bg-warning text-dark ms-2">ë³´ë„ˆìŠ¤: {{ result.bonus_number }}</span>
                    {% else %}
                        ì¶”ì²¨ ëŒ€ê¸° ì¤‘
                    {% endif %}
                </td>
                <td>{{ result.purchase.purchase_date|date:"Y-m-d H:i" }}</td>
                <td>
                    {% if result.rank == -1 %}
                        <span class="badge bg-secondary">ì¶”ì²¨ ëŒ€ê¸°</span>
                    {% elif result.rank == 0 %}
                        <span class="badge bg-dark">ë‚™ì²¨ (0ë“±)</span>
                    {% elif result.rank == 1 %}
                        <span class="badge bg-success fs-5">ğŸ¥‡ 1ë“± ë‹¹ì²¨!</span>
                    {% elif result.rank == 2 %}
                        <span class="badge bg-success">ğŸ¥ˆ 2ë“± ë‹¹ì²¨!</span>
                    {% elif result.rank == 3 %}
                        <span class="badge bg-info">ğŸ¥‰ 3ë“± ë‹¹ì²¨!</span>
                    {% elif result.rank == 4 %}
                        <span class="badge bg-warning text-dark">4ë“±</span>
                    {% elif result.rank == 5 %}
                        <span class="badge bg-light text-dark">5ë“±</span>
                    {% else %}
                        <span class="badge bg-danger">ì˜¤ë¥˜</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock content %}